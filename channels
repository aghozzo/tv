<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TV Channels â€¢ Digital Frame</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.15"></script>
<script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;width:100%;background:#000;overflow:hidden;font-family:Arial;}

#video-container{position:relative;width:100%;height:100%;}
#video{width:100%;height:100%;object-fit:contain;background:#000;}

.ctrl{
  position:absolute;bottom:110px;
  padding:8px 14px;font-size:16px;
  background:rgba(0,0,0,.6);color:#fff;
  border:none;border-radius:8px;
  opacity:0;pointer-events:none;z-index:20;
  transition:opacity .3s;
}
#play-pause{left:14px}
#unmute-btn{right:14px}
#airplay-btn{bottom:70px;left:14px}
#cast-btn{bottom:70px;right:14px}

#volume{
  position:absolute;bottom:10px;left:50%;
  transform:translateX(-50%);
  width:240px;opacity:0;pointer-events:none;
}

#buttons{
  position:fixed;top:0;left:0;right:0;
  background:rgba(15,15,15,.85);
  padding:4px;display:flex;flex-wrap:wrap;
  gap:4px;justify-content:center;
  z-index:30;transition:.3s;
}
#buttons.hidden{transform:translateY(-100%);opacity:0;pointer-events:none}
#buttons button{padding:8px 16px;background:#2a2a2a;color:#fff;border:none;border-radius:6px}
#buttons button.active{background:#0a84ff}

#status{
  position:absolute;bottom:170px;left:50%;
  transform:translateX(-50%);
  color:#aaa;background:rgba(0,0,0,.6);
  padding:6px 12px;border-radius:6px;
}

#pip{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:#000;z-index:100;display:none;flex-direction:column;
}
#pip-header{
  height:50px;background:#111;color:#fff;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 14px;
}
#pip iframe{width:100%;height:100%;border:none;flex:1}
#pip-close{background:none;border:none;color:#fff;font-size:24px}
</style>
</head>

<body>

<div id="video-container">
  <video id="video" autoplay playsinline></video>

  <button id="play-pause" class="ctrl">Play</button>
  <button id="unmute-btn" class="ctrl">ðŸ”‡</button>
  <button id="airplay-btn" class="ctrl">AirPlay</button>
  <button id="cast-btn" class="ctrl">Cast</button>
  <input id="volume" type="range" min="0" max="1" step="0.01" value="0.5">
  <div id="status">Loadingâ€¦</div>
</div>

<div id="buttons"></div>

<div id="pip">
  <div id="pip-header">
    <span id="pip-title">PiP</span>
    <button id="pip-close">âœ•</button>
  </div>
  <iframe></iframe>
</div>

<script>
const video=document.getElementById('video');
const buttonsBar=document.getElementById('buttons');
const volume=document.getElementById('volume');
const status=document.getElementById('status');
const pip=document.getElementById('pip');
const pipFrame=pip.querySelector('iframe');
const pipClose=document.getElementById('pip-close');
const pipTitle=document.getElementById('pip-title');

const controls=[
  playPause=document.getElementById('play-pause'),
  unmuteBtn=document.getElementById('unmute-btn'),
  airplayBtn=document.getElementById('airplay-btn'),
  castBtn=document.getElementById('cast-btn'),
  volume
];

let hls=null, hideTimer=null;
let currentButtonIndex=0;

/* ================= CHANNELS ================= */
const channels=[
 {name:"RoyaTV",url:"https://royatv-live.daioncdn.net/royatv/royatv_720p.m3u8"},
 {name:"Jordan",url:"https://jrtv-live.ercdn.net/jordanhd/jordanhd_720p.m3u8"},
 {name:"Mamlaka",url:"https://bcovlive-a.akamaihd.net/4109c7ba30fd4a44ad9afe917c67a8c8/eu-central-1/6415809151001/profile_2/chunklist_dvr.m3u8"},
 {name:"Amman",url:"https://ammantv-live.ercdn.net/ammantvhd/ammantvhd.m3u8"},
 {name:"Jazeera",url:"https://live-hls-apps-aja-fa.getaj.net/AJA/index.m3u8"},
 {name:"Arabiya",url:"https://live.alarabiya.net/alarabiapublish/alarabiya.smil/alarabiapublish/alarabiya_720p/chunks.m3u8"},
 {name:"Hadath",url:"https://av.alarabiya.net/alarabiapublish/alhadath.smil/alarabiapublish/alhadath_720p/chunks.m3u8"},
 {name:"Syr1",url:"https://live.syriaone.tv/live/syriaone.m3u8"},
 {name:"Syr2",url:"https://live.kwikmotion.com/syriatv02live/syriatv02.smil/syriatv02publish/syriatv02_720p/chunks.m3u8"},
 {name:"SyrTV",url:"https://live.kwikmotion.com/syriatvlive/syriatv.smil/syriatvpublish/syriatv_720p/chunks_dvr.m3u8"},
 {name:"JorSongs",url:"https://playlist.fasttvcdn.com/pl/cc0blorawy1ibohhrupraa/Song/playlist.m3u8"}
];

channels.forEach((c,i)=>{
 const b=document.createElement('button');
 b.textContent=c.name;
 b.onclick=()=>{currentButtonIndex=i;playChannel(c.url,b)};
 buttonsBar.appendChild(b);
});

/* ================= PiP ================= */
[{name:"Lebanon",url:"https://famelack.com/lb/emIP3T2eF8irvD"},
 {name:"Tarab",url:"https://famelack.com/sa/bLrhTddKmX53C8"},
 {name:"ABC",url:"https://famelack.com/us/P8q5mRZ0E6h0hF"}]
.forEach(p=>{
 const b=document.createElement('button');
 b.textContent=p.name;
 b.onclick=()=>{video.pause();pipFrame.src=p.url;pipTitle.textContent=p.name;pip.style.display="flex";}
 buttonsBar.appendChild(b);
});

pipClose.onclick=()=>{pip.style.display="none";pipFrame.src="";video.play().catch(()=>{})};

/* ================= STREAM ================= */
function playChannel(url,btn){
 document.querySelectorAll('#buttons button').forEach(b=>b.classList.remove('active'));
 btn.classList.add('active');
 if(hls)hls.destroy();
 hls=new Hls();
 hls.loadSource(url);
 hls.attachMedia(video);
 hls.on(Hls.Events.MANIFEST_PARSED,()=>video.play().catch(()=>{}));
}

/* ================= CONTROLS ================= */
playPause.onclick=()=>video.paused?video.play():video.pause();
unmuteBtn.onclick=()=>video.muted=!video.muted;
volume.oninput=()=>video.volume=volume.value;

/* ================= AUTO SHOW ================= */
function showUI(){
 buttonsBar.classList.remove('hidden');
 controls.forEach(c=>{c.style.opacity=1;c.style.pointerEvents="auto"});
 clearTimeout(hideTimer);
 hideTimer=setTimeout(()=>{
  buttonsBar.classList.add('hidden');
  controls.forEach(c=>{c.style.opacity=0;c.style.pointerEvents="none"});
 },3000);
}
['touchstart','mousemove','click'].forEach(e=>document.addEventListener(e,showUI,{passive:true}));

/* ================= TOUCH GESTURES ================= */
let sx=0,sy=0;
document.addEventListener('touchstart',e=>{
 sx=e.touches[0].clientX;
 sy=e.touches[0].clientY;
},{passive:true});

document.addEventListener('touchend',e=>{
 let dx=e.changedTouches[0].clientX-sx;
 let dy=e.changedTouches[0].clientY-sy;
 if(Math.max(Math.abs(dx),Math.abs(dy))<40)return;

 if(Math.abs(dy)>Math.abs(dx)){
  let v=video.volume+(dy<0?0.05:-0.05);
  v=Math.max(0,Math.min(1,v));
  video.volume=v;volume.value=v;
 }else{
  if(dx>0&&currentButtonIndex<buttonsBar.children.length-1)currentButtonIndex++;
  if(dx<0&&currentButtonIndex>0)currentButtonIndex--;
  buttonsBar.children[currentButtonIndex].click();
 }
},{passive:true});

/* ================= START ================= */
window.onload=()=>buttonsBar.children[0].click();

/* ================= TOUCH GESTURES (SAFE â€“ NON-BREAKING) ================= */
let touchStartX = 0;
let touchStartY = 0;

document.addEventListener("touchstart", (e) => {
  if (!e.touches || e.touches.length !== 1) return;
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
}, { passive: true });

document.addEventListener("touchend", (e) => {
  if (!e.changedTouches || e.changedTouches.length !== 1) return;

  const dx = e.changedTouches[0].clientX - touchStartX;
  const dy = e.changedTouches[0].clientY - touchStartY;

  const absX = Math.abs(dx);
  const absY = Math.abs(dy);

  /* Ignore tiny movements */
  if (absX < 40 && absY < 40) return;

  /* ===== VOLUME UP / DOWN ===== */
  if (absY > absX) {
    let v = video.volume;

    if (dy < 0) v = Math.min(1, v + 0.05);   // swipe up
    else        v = Math.max(0, v - 0.05);   // swipe down

    video.volume = v;
    volumeSlider.value = v;
    return;
  }

  /* ===== CHANNEL LEFT / RIGHT ===== */
  const btns = Array.from(document.querySelectorAll("#buttons button"));
  const activeIndex = btns.findIndex(b => b.classList.contains("active"));
  if (activeIndex === -1) return;

  if (dx > 0 && activeIndex < btns.length - 1) {
    btns[activeIndex + 1].click(); // swipe right
  }

  if (dx < 0 && activeIndex > 0) {
    btns[activeIndex - 1].click(); // swipe left
  }
}, { passive: true });


</script>
</body>
</html>
